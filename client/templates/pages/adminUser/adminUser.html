<template name="adminUser">

	<!-- Menubar not properly positioned , temporairly setting position via css -->
	<!-- TODO : Use proper bootstrap instead -->
	<div class="menuBar">
		<a href="#" id="logout" class="{{#if loggedIn}}hidden{{/if}}"> <img class="lg-icon" src="/img/login_button_deactive.png" ></a>
	</div>

	<div class="row overflow"> 
		<div class="col-md-12 col-sm-12 col-xs-12">

			<center> Welcome to the admin Dashboard </center>
			<div class="tab row">
			 <div class="col-md-4 col-sm-4 col-xs-4">
			  {{#if swapView}}
			  <button class="tablinks active2" id="view1">All Users</button>
			  {{else}}
			  <button class="tablinks" id="view1">All Users</button>
			  {{/if}}
			  </div>
			  <div class="col-md-4 col-sm-4 col-xs-4">
			  {{#unless swapView}}
			  <button class="tablinks active2" id="view2">GameMaster</button>
			  {{else}}
			  <button class="tablinks" id="view2">GameMaster</button>
			  {{/unless}}
			  </div>
			  <div class="col-md-4 col-sm-4 col-xs-4"> </div>
			</div>
			{{#if swapView}}
				{{>adminGameMasterView}}
			{{else}}
				<div class="col-md-12 col-sm-12 col-xs-12">
					<div class="widget widget-fullwidth widget-small">
						<div class="widget-head">
							<div class="title"><strong>{{listusers.count}}</strong> Users </div>
						</div>
						<div class="table-responsive noSwipe">
							<table class="table table-fw-widget table-hover">
								<thead>
									<tr>
										<th></th>
										<th></th>
										<th width="10%">Name / Email</th>
										<th width="10%">Game Master</th>
										<th width="10%">Type</th>
										<th width="5%"> Email Confirmed</th>
										<th width="20%">Created</th>
										<th> Last Login</th>
									</tr>
								</thead>
								<tbody class="no-border-x">
									{{#each listusers}}
													  								

									<tr>


										<td>{{#if status.online}}
											<span class="badge badge-success">&nbsp;</span>
											{{else}}
											<span class="badge badge-warning">&nbsp;</span>
											{{/if}}
										</td>

										<td class="user-avatar" id="user" data-userId="{{_id}}">
											<div><span class="status"></span>
												{{#if picture _id}}
												<img class="img-circle" src="{{picture _id}}">
												{{else}}
												<img class="img-circle" width="75" height="75" src="/img/profile/profile4.png">
												{{/if}}



											</div>
										</td>


										<td id="user" data-userId="{{_id}}">


											<b class="text-capitalize">

												{{profile.firstName}}

												{{profile.lastName}}

											</b>
											<br/>
											{{#if profile.publicProfileUrl}}
											<span class="badge">
											<a class="colorRed" href={{profile.publicProfileUrl}} target="_blank">{{profile.publicProfileUrl}}</a>
											</span>
											{{/if}}


											<br/>
											<h5 class="pull-left"> {{#each emails}} {{address}} {{/each}} </h5>

										</td>

										<td>
										
										<label data-userId="{{_id}}" class="switch">
										{{#if gameMaster}}
										  <input type="checkbox" checked>
										{{else}}
										  <input type="checkbox">
										{{/if}}
										  <div class="slider round"></div>
										</label>	
										</td>

										<td id="user" data-userId="{{_id}}">

											<span class="badge badge-info">
												{{#if emails}} Wequ {{else}} Linked In {{/if}}
												
											</span>
											{{#if profile.userType}}
											<span class="badge badge-info">
											 {{profile.userType}}
											</span>
											 {{/if}}

											{{#if this.roles}}
											<span class="badge badge-info">
												{{this.roles}}
											</span>
											{{/if}}

											{{#if services.invitationId}} 
											<span class="badge badge-info">
												Invited
											</span>
											{{/if}}

										</td>
										<td id="user" data-userId="{{_id}}">
											{{#each emails}}
											{{#if verified}}
											<span class="badge badge-success">YES</span>
											{{/if}}

											{{#unless verified}}
											<span class="badge badge-warning">NO</span>
											{{/unless}}

											{{/each}}
											{{#unless emails}}
											<span class="badge badge-default">NA</span>
											{{/unless}}
										</td>
										<td id="user" data-userId="{{_id}}">{{formatDateTime createdAt}}</td>
										<td id="user" data-userId="{{_id}}">
											{{ formatDateTime status.lastLogin.date}}
										</td>
									</tr>
									{{/each}}
								</tbody>
							</table>
						</div>
					</div>
				</div>
				
			{{/if}}
		</div>
	</div>

	<center>
	<button> <a href="/adminAccountCreation"> Create test account  </a> </button>
	</center>

</template>